<nav>
  <% if @allow %>
    <a href="javascript:history.go(-1)" class="back-btn">
      <div class="arrow-container">
        <div class="arrow"></div>
        <div class="arrow"></div>
      </div>
    </a>
  <% elsif @chatback %>
    <%= link_to conversations_path, class: "back-btn" do %>
      <div class="arrow-container">
        <div class="arrow"></div>
        <div class="arrow"></div>
      </div>
    <% end %>
  <% else %>
    <div class="search-icon" id="searchMenuButton">
      <div class="magnify">
        <div class="glass"></div>
        <div class="handle"></div>
      </div>
    </div>
  <% end %>

  <%= link_to root_path do %>
    <div class="logo">
      <?xml version="1.0" encoding="UTF-8"?>
      <svg enable-background="new 0 0 57 70.8" version="1.1" viewBox="0 0 57 70.8" xml:space="preserve" xmlns="http://www.w3.org/2000/svg">
        <path class="logo-fill" d="m38.9 11.3s-4.4-1.8-4.4-5.8c0-0.9-0.8-1.7-1.7-1.7s-1.7 0.8-1.7 1.7c0 6.3 6.2 8.8 6.5 9 9.5 3.7 15.9 12.7 15.9 22.3 0 13.1-11.5 24.1-25.1 24.1s-25-11-25-24.1c0-9.7 6.5-18.7 16.1-22.4h0.1c0.4-0.2 9.6-4.5 9.6-12.7 0-0.9-0.8-1.7-1.7-1.7s-1.7 0.8-1.7 1.7c0 5.7-7 9.3-7.6 9.5-10.9 4.3-18.2 14.5-18.2 25.6 0 12.5 9.2 23.4 21.3 26.6l-2.3 2.3c-0.7 0.7-0.7 1.7 0 2.4 0.3 0.3 0.8 0.5 1.2 0.5s0.9-0.2 1.2-0.5l3.9-3.9 0.1-0.1c0.5 0.1 0.9 0.1 1.4 0.1v4.9c0 0.9 0.8 1.7 1.7 1.7s1.7-0.8 1.7-1.7v-4.9c0.5 0 0.9-0.1 1.4-0.1l0.1 0.1 3.9 3.9c0.3 0.3 0.8 0.5 1.2 0.5s0.9-0.2 1.2-0.5c0.7-0.7 0.7-1.7 0-2.4l-2.3-2.3c12.1-3.2 21.3-14.1 21.3-26.6 0-11-7.3-21.2-18.1-25.5z"/>
        <path class="logo-fill" d="m28.5 57.7c-11.6 0-21-9.4-21-21s9.4-21 21-21 21 9.4 21 21-9.4 21-21 21zm0-39c-9.9 0-18 8.1-18 18s8.1 18 18 18 18-8.1 18-18-8.1-18-18-18z"/>
        <path class="logo-fill" d="m28.5 50.7c-7.7 0-14-6.3-14-14s6.3-14 14-14 14 6.3 14 14-6.3 14-14 14zm0-25c-6.1 0-11 4.9-11 11s4.9 11 11 11 11-4.9 11-11-4.9-11-11-11z"/>
        <path class="logo-fill" d="m28.5 43.7c-3.9 0-7-3.1-7-7s3.1-7 7-7 7 3.1 7 7-3.2 7-7 7zm0-11c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4z"/>
      </svg>
    </div>
    <div class="name">wechef</div>
  <% end %>

  <div class="menu-icon" id="userMenuButton">
    <div class="row"></div>
    <div class="row"></div>
  </div>

    <% #if chef_signed_in? %>
    <div class="avatar" id="userMenuButton">
      <%# cl_image_tag current_chef.photo, height: 33, width: 33, crop: :fill %>
    </div>
    <% #elsif restaurant_signed_in? %>
    <div class="avatar" id="userMenuButton">
      <%# cl_image_tag current_restaurant.photo, height: 30, width: 30, crop: :fill %>
    </div>
    <% #else %>

    <% #end %>


</nav>

<div class="user-menu" id="userMenu">
  <div class="close-btn" id="closeUserMenu">
    <div class="diag"></div>
    <div class="diag"></div>
  </div>
  <div class="restaurant-menu-container">

    <% if restaurant_signed_in? %>
      <%= link_to "Dashboard", myrestaurant_path %>

      <%= link_to "My Restaurant", restaurant_path(current_restaurant) %>

      <%= link_to "Manage Restaurant", edit_restaurant_path(current_restaurant) %>

      <%= link_to "Conversations", conversations_path %>

      <%= link_to('Sign out of Restaurant', destroy_restaurant_session_path, method: :delete) %>

    <% else %>

      <%= link_to('Sign in to Restaurant', new_restaurant_session_path) %>
      <%= link_to "Sign up as Restaurant", new_restaurant_registration_path %>

    <% end %>
  </div>

  <div class="chef-menu-container">
    <% if chef_signed_in? %>
      <%= link_to "Dashboard", dashboard_path %>

      <%= link_to "Your Profile", chef_path(current_chef) %>

      <%= link_to "Manage Profile", edit_chef_path(current_chef) %>

      <%= link_to "Bookings", chef_path(current_chef) %>

      <%= link_to "Conversations", conversations_path %>

      <%= link_to('Sign out of Chef', destroy_chef_session_path, method: :delete) %>

    <% else %>
      <div class="become-chef-container">
        <%= link_to "Become a Chef", new_chef_registration_path, class: "become-chef-btn" %>

        <%= link_to('Sign in as a Chef', new_chef_session_path, class: "chef-sign-in") %>
      </div>
    <% end %>
  </div>
</div>

<div class="search-menu" id="searchMenu">
  <div class="close-btn" id="closeSearchMenu">
    <div class="diag"></div>
    <div class="diag"></div>
  </div>
  <h1>Search</h1>
  </div>
</div>

<script>
   //USER MENU
  //Open user menu
  var userMenuButton = document.getElementById("userMenuButton");
  var userMenu = document.getElementById("userMenu")
  userMenuButton.addEventListener("click", function(){
    userMenu.style.left = 0;
    document.getElementsByTagName('body')[0].style = 'overflow: hidden';
  });

  //Close user menu
  var closeMenu = document.getElementById("closeUserMenu");
  closeUserMenu.addEventListener("click", function(){
    userMenu.style.left = "100vw";
    document.getElementsByTagName('body')[0].style = 'overflow: scroll';
  });

  //SEARCH MENU
  //Open search menu
  var searchMenuButton = document.getElementById("searchMenuButton");
  var searchMenu = document.getElementById("searchMenu")
  searchMenuButton.addEventListener("click", function(){
    searchMenu.style.right = 0;
    document.getElementsByTagName('body')[0].style = 'overflow: hidden';
  });

  //Close search menu
  var closeSearchMenu = document.getElementById("closeSearchMenu");
  closeSearchMenu.addEventListener("click", function(){
    searchMenu.style.right = "100vw";
    document.getElementsByTagName('body')[0].style = 'overflow: scroll';
  });
</script>
